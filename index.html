<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UI/UX Terminology Hub (æ™ºæ…§æ“´å……ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tailwind Configuration for Custom Warm Color -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Based on #D69A5B (Your requested color)
                        'warm': {
                            50: '#FDF7F0',
                            100: '#FAEAD9', // Lightest background for tags
                            200: '#EED9B3', // Focus ring, light borders
                            500: '#D69A5B', // Base color
                            600: '#C58C4F', // Button hover / Accent
                            700: '#A87A4F', // Button main / Text accent
                            800: '#8A643D',
                        },
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f5f5f4; 
            color: #44403c; 
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f5f5f4; 
        }
        ::-webkit-scrollbar-thumb {
            background: #d6d3d1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a29e; 
        }

        .card-hover {
            transition: all 0.2s ease-in-out;
            cursor: default; 
        }
        .card-hover:hover {
            transform: translateY(-4px); 
            box-shadow: 0 12px 20px -5px rgba(0, 0, 0, 0.1), 0 5px 10px -3px rgba(0, 0, 0, 0.05);
        }

        .related-tag, .suggestion-tag {
            cursor: pointer;
            transition: background-color 0.15s;
        }
        .related-tag:hover, .suggestion-tag:hover {
            background-color: #C58C4F; /* warm-600 */
            color: white;
        }
        
        /* Markdown-like styles for API content */
        .api-content ul {
            list-style-type: disc;
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }
        .api-content p {
            margin-bottom: 0.75rem;
        }
        .api-content strong {
            color: #A87A4F;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navbar/Header -->
    <nav class="bg-white shadow-sm sticky top-0 z-50 border-b border-stone-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
            <div class="flex items-center justify-between">
                <span class="text-2xl font-black text-warm-700 tracking-tight flex items-center gap-2">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"/></svg>
                    è¨­è¨ˆè¡“èªé€ŸæŸ¥
                </span>
                <div class="text-sm font-light text-stone-500 hidden sm:block">UI/UX Terminology Hub (æ™ºæ…§æ“´å……ç‰ˆ)</div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 space-y-12">

        <!-- Header Section -->
        <div class="max-w-4xl mx-auto space-y-4">
            <h1 class="text-5xl font-extrabold text-stone-800">UI/UX æ ¸å¿ƒè©å½™</h1>
            <p class="text-xl text-stone-600 leading-relaxed">
                æ•´åˆæœ€æ–°è¨­è¨ˆè¦ç¯„å®šç¾©ã€‚é€é <span class="text-warm-700 font-bold">âœ¨ AI å¯¦é©—å®¤</span>ï¼Œæ‚¨å¯ä»¥é€²è¡Œè¡“èªæ¯”è¼ƒèˆ‡è‡ªæˆ‘æ¸¬é©—ã€‚
            </p>

            <!-- Tools Navigation -->
            <div class="flex flex-wrap gap-3 py-4">
                <button onclick="switchMode('search')" id="btn-search" class="px-6 py-2 rounded-full font-bold transition shadow-sm bg-warm-700 text-white">
                    ğŸ” è¡“èªæœå°‹
                </button>
                <button onclick="switchMode('compare')" id="btn-compare" class="px-6 py-2 rounded-full font-bold transition shadow-sm bg-white text-stone-600 border border-stone-300 hover:bg-warm-50 hover:border-warm-400">
                    âš”ï¸ è¡“èªå¤§å°æ±º (AI)
                </button>
                <button onclick="switchMode('quiz')" id="btn-quiz" class="px-6 py-2 rounded-full font-bold transition shadow-sm bg-white text-stone-600 border border-stone-300 hover:bg-warm-50 hover:border-warm-400">
                    ğŸ² æƒ…å¢ƒéš¨å ‚è€ƒ (AI)
                </button>
            </div>
        </div>

        <!-- MODE 1: Search Explorer -->
        <section id="section-search" class="space-y-6">
            <div class="max-w-4xl mx-auto">
                <div class="relative w-full">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-4 text-stone-400">ğŸ”</span>
                    <input type="text" id="searchInput" placeholder="æœå°‹è¡“èªã€å®šç¾©æˆ–æƒ…å¢ƒ..." 
                        class="w-full pl-12 pr-4 py-3 border border-stone-300 rounded-2xl focus:outline-none focus:ring-4 focus:ring-warm-200 focus:border-warm-500 bg-white text-stone-700 shadow-md transition-all text-lg">
                </div>
            </div>

            <!-- Filter Tags -->
            <div id="filterContainer" class="flex flex-wrap gap-2 pt-2 max-w-4xl mx-auto"></div>

            <!-- Cards Grid -->
            <div id="cardsContainer" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 pt-4"></div>
            
            <!-- Empty State & Expansion Button -->
            <div id="emptyState" class="hidden text-center py-12 bg-white rounded-2xl p-8 shadow-inner border border-stone-200 max-w-3xl mx-auto">
                <div class="text-4xl mb-4">ğŸ“­</div>
                <h3 class="text-2xl font-bold text-stone-700 mb-2">æœªåœ¨è³‡æ–™åº«ä¸­æ‰¾åˆ°çµæœ</h3>
                <p id="emptyMessage" class="text-lg text-stone-500 mb-6"></p>
                <div id="suggestionContainer" class="mt-4 flex flex-wrap justify-center gap-3"></div>
                <div class="mt-10 border-t border-dashed border-warm-200 pt-6">
                    <h4 class="text-xl font-bold text-warm-700 mb-3 flex items-center justify-center">è¡“èªæ“´å……åŠ©æ‰‹</h4>
                    <p class="text-stone-500 mb-4">ä½¿ç”¨ AI æŸ¥æ‰¾ä¸¦å®šç¾©é€™å€‹è¡“èªã€‚</p>
                    <button id="expandButton" onclick="fetchAndDisplayExpansion()" class="px-8 py-3 bg-warm-700 text-white rounded-xl hover:bg-warm-800 transition shadow-lg text-lg font-semibold disabled:bg-warm-400">
                        <span id="buttonText">å‹•æ…‹æŸ¥æ‰¾ä¸¦å®šç¾©</span>
                    </button>
                </div>
            </div>
            
            <!-- Expansion Result Card -->
            <div id="expansionAssistantCard" class="hidden card-hover bg-white rounded-2xl border-4 border-warm-200 shadow-2xl p-6 flex flex-col max-w-3xl mx-auto"></div>
        </section>

        <!-- MODE 2: AI Comparison Lab -->
        <section id="section-compare" class="hidden space-y-8 max-w-5xl mx-auto w-full">
            <div class="bg-white rounded-3xl p-8 shadow-xl border border-stone-200">
                <h2 class="text-3xl font-black text-warm-700 mb-2 flex items-center gap-2">
                    <span>âš”ï¸</span> è¡“èªå¤§å°æ±º (Smart Comparison)
                </h2>
                <p class="text-stone-500 mb-8">ä¸ç¢ºå®šå…©å€‹ç›¸ä¼¼è¡“èªçš„å·®ç•°ï¼Ÿè¼¸å…¥å®ƒå€‘ï¼ˆä¾‹å¦‚ï¼šModal vs Alertï¼‰ï¼Œè®“ AI ç‚ºæ‚¨åˆ†æä½¿ç”¨æ™‚æ©Ÿèˆ‡é—œéµå·®ç•°ã€‚</p>
                
                <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-center mb-8">
                    <div class="md:col-span-5">
                        <label class="block text-sm font-bold text-stone-500 mb-1 ml-1">è¡“èª A</label>
                        <input type="text" id="termA" placeholder="ä¾‹å¦‚ï¼šToast" class="w-full px-4 py-3 border border-stone-300 rounded-xl focus:ring-2 focus:ring-warm-500 bg-stone-50 text-lg font-bold text-center">
                    </div>
                    <div class="md:col-span-2 flex justify-center">
                        <span class="text-2xl font-black text-warm-400 bg-warm-50 rounded-full w-12 h-12 flex items-center justify-center">VS</span>
                    </div>
                    <div class="md:col-span-5">
                        <label class="block text-sm font-bold text-stone-500 mb-1 ml-1">è¡“èª B</label>
                        <input type="text" id="termB" placeholder="ä¾‹å¦‚ï¼šSnackbar" class="w-full px-4 py-3 border border-stone-300 rounded-xl focus:ring-2 focus:ring-warm-500 bg-stone-50 text-lg font-bold text-center">
                    </div>
                </div>
                
                <div class="text-center">
                    <button onclick="fetchComparison()" class="px-10 py-4 bg-warm-700 text-white text-xl font-bold rounded-2xl hover:bg-warm-800 shadow-lg transform transition active:scale-95 flex items-center justify-center mx-auto gap-2">
                        <span>ğŸš€</span> é–‹å§‹åˆ†ææ¯”è¼ƒ
                    </button>
                </div>
            </div>

            <!-- Comparison Result -->
            <div id="comparisonResult" class="hidden animate-fade-in">
                <!-- Content injected via JS -->
            </div>
        </section>

        <!-- MODE 3: AI Quiz Lab -->
        <section id="section-quiz" class="hidden space-y-8 max-w-3xl mx-auto w-full">
            <div class="bg-white rounded-3xl p-8 shadow-xl border border-stone-200 text-center">
                <div class="text-6xl mb-4">ğŸ“</div>
                <h2 class="text-3xl font-black text-warm-700 mb-3">UI/UX æƒ…å¢ƒéš¨å ‚è€ƒ</h2>
                <p class="text-stone-500 mb-8">AI å°‡å¾è³‡æ–™åº«æˆ–ç¶²è·¯ä¸Šéš¨æ©Ÿç”Ÿæˆä¸€é“å¯¦å‹™æƒ…å¢ƒé¡Œã€‚æŒ‘æˆ°æ‚¨çš„è¨­è¨ˆçŸ¥è­˜ï¼</p>
                
                <button onclick="fetchQuiz()" id="startQuizBtn" class="px-10 py-4 bg-warm-700 text-white text-xl font-bold rounded-2xl hover:bg-warm-800 shadow-lg transform transition active:scale-95">
                    ğŸ² å‡ºä¸€é¡Œè€ƒè€ƒæˆ‘
                </button>
            </div>

            <!-- Quiz Card -->
            <div id="quizCard" class="hidden bg-white rounded-3xl shadow-2xl border-4 border-warm-100 overflow-hidden">
                <!-- Content injected via JS -->
            </div>
        </section>

    </main>

    <footer class="bg-stone-800 text-stone-400 py-8 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2">UI/UX Terminology Hub (æ™ºæ…§æ“´å……ç‰ˆ)</p>
            <p class="text-sm text-stone-500">Powered by Gemini API. æ ¸å¿ƒè³‡æ–™åº«å·²æ“´å……è‡³ > 120 å€‹è©å½™ã€‚</p>
        </div>
    </footer>

    <script>
        // --- Data Source (Terminology Data) ---
        // (Keeping the data concise for the file generation, usually this would be the full list)
        const terminologyData = [
             // 1. è¨Šæ¯èˆ‡å›é¥‹
            { category: "1. è¨Šæ¯èˆ‡å›é¥‹", term: "Modal / Dialog", def: "æ¨¡æ…‹æ¡† / å°è©±æ¡†", useCase: "å¼·åˆ¶ä¸­æ–·ï¼šç”¨æ–¼å®Œæˆç¨ç«‹ã€è¤‡é›œçš„ä»»å‹™æˆ–éœ€è¦ä½¿ç”¨è€…åšå‡ºé‡å¤§æ±ºå®šçš„æƒ…å¢ƒã€‚æœƒé–å®šèƒŒæ™¯ï¼Œéœ€è¦æ˜ç¢ºé—œé–‰ã€‚", related: ["Alert", "Drawer", "Snackbar"] },
            { category: "1. è¨Šæ¯èˆ‡å›é¥‹", term: "Alert", def: "è­¦å‘Šå°è©±æ¡†", useCase: "å¼·åˆ¶ä¸­æ–·ï¼šè©¢å•æ˜¯/å¦æˆ–ç¢ºèªç ´å£æ€§æ“ä½œï¼ˆå¦‚åˆªé™¤ï¼‰çš„ç°¡çŸ­æç¤ºï¼Œéœ€æœ‰æ˜ç¢ºæŒ‰éˆ•å›è¦†ã€‚", related: ["Modal / Dialog", "Toast"] },
            { category: "1. è¨Šæ¯èˆ‡å›é¥‹", term: "Toast", def: "åå¸é€šçŸ¥", useCase: "éä¸­æ–·ï¼šè¼•é‡ç´šã€çŸ­æš«ã€è‡ªå‹•æ¶ˆå¤±çš„æ“ä½œå›é¥‹è¨Šæ¯ï¼Œä¸å½±éŸ¿ä½¿ç”¨è€…ç•¶å‰ä»»å‹™ã€‚", related: ["Snackbar", "Tooltip"] },
            { category: "1. è¨Šæ¯èˆ‡å›é¥‹", term: "Snackbar", def: "è¨Šæ¯æ¢", useCase: "éä¸­æ–·ï¼šé€šå¸¸ä½æ–¼åº•éƒ¨ï¼Œè¨Šæ¯è¼ƒé•·ï¼Œå¯åŒ…å«ä¸€å€‹ã€å¾©åŸ (Undo)ã€ç­‰å³æ™‚æ“ä½œæŒ‰éˆ•ã€‚", related: ["Toast", "Alert"] },
            { category: "1. è¨Šæ¯èˆ‡å›é¥‹", term: "Tooltip", def: "å·¥å…·æç¤º", useCase: "æ‡¸æµ®è¼”åŠ©ï¼šæ»‘é¼ æ‡¸åœæ™‚å‡ºç¾çš„å°æ°£æ³¡ï¼Œæä¾›åœ–æ¨™åç¨±æˆ–ç°¡çŸ­èªªæ˜ï¼Œå¹«åŠ©ç†è§£ä»‹é¢å…ƒç´ ã€‚", related: ["Hover", "Hint"] },
            // 2. å…ƒä»¶èˆ‡è¼¸å…¥
            { category: "2. å…ƒä»¶èˆ‡è¼¸å…¥", term: "Input Field", def: "è¼¸å…¥æ¡† / æ–‡å­—æ¬„ä½", useCase: "æ¥æ”¶å–®è¡Œæˆ–å¤šè¡Œæ–‡å­—è¼¸å…¥ï¼Œå¿…é ˆåŒ…å« Label å’Œ Helper Textï¼Œä»¥ä¾¿ä½¿ç”¨è€…ç†è§£æ ¼å¼è¦æ±‚ã€‚", related: ["Form", "Label", "Placeholder"] },
            { category: "2. å…ƒä»¶èˆ‡è¼¸å…¥", term: "Label", def: "æ¨™ç±¤ (è¡¨å–®)", useCase: "æè¿°è¼¸å…¥æ¡†æ‡‰å¡«å¯«ä»€éº¼å…§å®¹ï¼Œæ˜¯æ‰€æœ‰è¡¨å–®å…ƒä»¶çš„åç¨±ã€‚å³ä½¿è¼¸å…¥å…§å®¹å¾Œï¼ŒLabel ä¹Ÿæ‡‰ä¿æŒå¯è¦‹ã€‚", related: ["Placeholder", "Float Label"] },
            { category: "2. å…ƒä»¶èˆ‡è¼¸å…¥", term: "Placeholder", def: "æç¤ºæ–‡å­— / ä½”ä½ç¬¦", useCase: "è¼¸å…¥æ¡†ç‚ºç©ºæ™‚ï¼Œé¡¯ç¤ºçš„æç¤ºæ€§æ–‡å­—ï¼Œé€šå¸¸åœ¨ä½¿ç”¨è€…è¼¸å…¥å¾Œæ¶ˆå¤±ã€‚æ³¨æ„ï¼šä¸æ‡‰ç”¨ä½œ Labelã€‚", related: ["Label", "Input Field"] },
            { category: "2. å…ƒä»¶èˆ‡è¼¸å…¥", term: "Helper Text", def: "è¼”åŠ©èªªæ˜æ–‡å­—", useCase: "ä½æ–¼è¼¸å…¥æ¡†ä¸‹æ–¹ï¼Œæä¾›é¡å¤–çš„æç¤ºã€æ ¼å¼è¦æ±‚æˆ–é™åˆ¶èªªæ˜ï¼Œå¹«åŠ©ä½¿ç”¨è€…æ­£ç¢ºå¡«å¯«ã€‚", related: ["Hint", "Error Message"] },
            { category: "2. å…ƒä»¶èˆ‡è¼¸å…¥", term: "Hint", def: "æç¤º / ç·šç´¢", useCase: "æä¾›æ¯” 'Helper Text' æ›´å…·é«”ã€æ›´å…·æƒ…å¢ƒçš„æç¤ºã€‚æœ‰æ™‚èˆ‡ Tooltip çµåˆä½¿ç”¨ã€‚", related: ["Tooltip", "Helper Text"] },
            { category: "2. å…ƒä»¶èˆ‡è¼¸å…¥", term: "Required", def: "å¿…å¡«æ¨™è¨˜", useCase: "è¦–è¦ºä¸Šæ¨™è¨˜è©²æ¬„ä½å¿…é ˆå¡«å¯«ï¼ˆé€šå¸¸ä½¿ç”¨ç´…è‰²æ˜Ÿè™Ÿ * æˆ–æ–‡å­—ï¼‰ï¼Œé˜²æ­¢æäº¤ä¸å®Œæ•´çš„è¡¨å–®ã€‚", related: ["Input Field", "Validation"] },
            { category: "2. å…ƒä»¶èˆ‡è¼¸å…¥", term: "Dropdown", def: "ä¸‹æ‹‰é¸å–®", useCase: "å¾é è¨­é¸é …ä¸­å–®é¸ï¼Œé¸é …åˆ—è¡¨åˆå§‹éš±è—ï¼Œé©åˆé¸é …æ•¸é‡è¶…é 5 å€‹ä¸”ç©ºé–“æœ‰é™æ™‚ä½¿ç”¨ã€‚", related: ["Radio Button", "Checkbox"] },
            { category: "2. å…ƒä»¶èˆ‡è¼¸å…¥", term: "Checkbox", def: "è¤‡é¸æ¡†", useCase: "ç”¨æ–¼å¾ä¸€çµ„é¸é …ä¸­é¸æ“‡é›¶å€‹ã€ä¸€å€‹æˆ–å¤šå€‹é …ç›®ã€‚æ”¯æ´ä¸ç¢ºå®š (Indeterminate) ç‹€æ…‹ã€‚", related: ["Radio Button", "Switch / Toggle"] },
            { category: "2. å…ƒä»¶èˆ‡è¼¸å…¥", term: "Radio Button", def: "å–®é¸æŒ‰éˆ•", useCase: "å¾ä¸€çµ„é¸é …ä¸­äº’æ–¥ä¸”å¼·åˆ¶é¸æ“‡ä¸€å€‹ï¼Œé€šå¸¸é©ç”¨æ–¼é¸é …æ•¸é‡å°‘æ–¼ 5 å€‹çš„æƒ…å¢ƒã€‚", related: ["Checkbox", "Dropdown"] },
            { category: "2. å…ƒä»¶èˆ‡è¼¸å…¥", term: "Switch / Toggle", def: "é–‹é—œåˆ‡æ›", useCase: "ç”¨æ–¼åˆ‡æ›å–®ä¸€çš„é–‹/é—œç‹€æ…‹ï¼Œé€šå¸¸ç”¨æ–¼ç«‹å³ç”Ÿæ•ˆçš„è¨­å®šï¼ˆå¦‚é–‹å•Ÿæ·±è‰²æ¨¡å¼ï¼‰ã€‚", related: ["Checkbox", "Disabled"] },
            { category: "2. å…ƒä»¶èˆ‡è¼¸å…¥", term: "DatePicker", def: "æ—¥æœŸé¸æ“‡å™¨", useCase: "æ¥æ”¶æ—¥æœŸè¼¸å…¥çš„å…ƒä»¶ï¼Œé€šå¸¸é€éåœ–å½¢åŒ–è¡Œäº‹æ›†ä»‹é¢è®“ä½¿ç”¨è€…é¸æ“‡ï¼Œé¿å…æ ¼å¼éŒ¯èª¤ã€‚", related: ["Input Field", "Dropdown"] },
             // 6. é¡è‰²èˆ‡æ–‡å­—
            { category: "6. é¡è‰²èˆ‡æ–‡å­—", term: "Primary Text", def: "ä¸»è¦æ–‡å­—", useCase: "æœ€é«˜å°æ¯”åº¦çš„æ–‡å­—é¡è‰²ï¼ˆå¦‚æ·±ç°æˆ–é»‘è‰²ï¼‰ï¼Œç”¨æ–¼æ¨™é¡Œå’Œä¸»è¦å…§æ–‡ï¼Œç¢ºä¿æ ¸å¿ƒè¨Šæ¯çš„å¯è®€æ€§ã€‚", related: ["Secondary Text", "Contrast"] },
            { category: "6. é¡è‰²èˆ‡æ–‡å­—", term: "Secondary Text", def: "æ¬¡è¦æ–‡å­—", useCase: "å°æ¯”åº¦è¼ƒä½ï¼ˆå¦‚ç°è‰²ï¼‰ï¼Œç”¨æ–¼è¼”åŠ©è³‡è¨Šã€å…ƒæ•¸æ“šï¼ˆå¦‚æ—¥æœŸï¼‰æˆ–æ¨™ç±¤ï¼Œå»ºç«‹è¦–è¦ºå±¤æ¬¡ã€‚", related: ["Primary Text", "Visual Hierarchy"] },
            { category: "6. é¡è‰²èˆ‡æ–‡å­—", term: "Tertiary Text", def: "ç¬¬ä¸‰å±¤ç´šæ–‡å­—", useCase: "ç”¨æ–¼éå¿…è¦çš„è£é£¾æ€§æ–‡å­—ã€æç¤ºæ–‡å­— (Placeholder) æˆ–ç¦ç”¨ç‹€æ…‹ï¼Œè¦–è¦ºæ¬Šé‡æœ€ä½ã€‚", related: ["Placeholder", "Disabled"] },
            { category: "6. é¡è‰²èˆ‡æ–‡å­—", term: "Primary Color", def: "ä¸»è¦å“ç‰Œè‰²", useCase: "ç”¨æ–¼é—œéµè¡Œå‹•ã€å“ç‰Œè­˜åˆ¥å’Œæœ€é«˜å„ªå…ˆç´šçš„æŒ‰éˆ•å¡«å……ï¼Œä»£è¡¨å“ç‰Œå€‹æ€§ã€‚", related: ["Secondary Color", "Token"] },
            { category: "6. é¡è‰²èˆ‡æ–‡å­—", term: "Secondary Color", def: "æ¬¡è¦è¼”åŠ©è‰²", useCase: "ç”¨æ–¼æ¬¡è¦è¡Œå‹•ã€è¼”åŠ©å°èˆªæˆ–èˆ‡ä¸»è¦å“ç‰Œè‰²å½¢æˆå±¤æ¬¡å°æ¯”çš„å…ƒç´ ã€‚", related: ["Primary Color", "Color Contrast"] },
            { category: "6. é¡è‰²èˆ‡æ–‡å­—", term: "Accent Color", def: "å¼·èª¿è‰² / é»ç¶´è‰²", useCase: "ç”¨æ–¼å¼·èª¿é—œéµè¡Œå‹• (CTA)ã€é€£çµæˆ–é¸å–ç‹€æ…‹çš„é¡è‰²ï¼Œé€šå¸¸æ¯”ä¸»è¦å“ç‰Œè‰²æ›´äº®æˆ–æ›´å…·å°æ¯”æ€§ã€‚", related: ["Primary Color", "Call to Action (CTA)"] },
            { category: "6. é¡è‰²èˆ‡æ–‡å­—", term: "Neutral Colors", def: "ä¸­æ€§è‰² / ç°éš", useCase: "ç”¨æ–¼èƒŒæ™¯ã€é‚Šæ¡†ã€ç·šæ¢å’Œæ–‡å­—çš„ç°è‰²ç³»ï¼Œæ§‹å»ºä»‹é¢éª¨æ¶è€Œä¸å¹²æ“¾å…§å®¹ã€‚", related: ["White Space", "Surface"] },
            { category: "6. é¡è‰²èˆ‡æ–‡å­—", term: "Success / Error", def: "æˆåŠŸ / éŒ¯èª¤è‰²", useCase: "ç¶ è‰²/ç´…è‰²ï¼Œç”¨æ–¼å‚³é”æ“ä½œçµæœæˆ–è¡¨å–®é©—è­‰ç‹€æ…‹ï¼Œé¡è‰²æ‡‰ç¬¦åˆ WCAG å°æ¯”åº¦æ¨™æº–ã€‚", related: ["Color Contrast", "Inline Validation"] },
             // ... (Keep other existing data for completeness in real app) ...
             { category: "14. æ–‡å­—æ’ç‰ˆèˆ‡æ¨£å¼", term: "Caption", def: "èªªæ˜æ–‡å­— / åœ–èªª", useCase: "ç”¨æ–¼åœ–ç‰‡èªªæ˜ã€ç‰ˆæ¬Šè³‡è¨Šã€æˆ–è¡¨å–®çš„ Helper Textã€‚ç›®æ¨™æ˜¯ä½æ¬Šé‡ï¼Œä¸å¹²æ“¾ä¸»é«”å…§å®¹ã€‚", related: ["Helper Text", "Body Text"] },
        ];
        
        // --- Shared Vars ---
        const apiKey = ""; // API Key injected by environment
        const apiBaseUrl = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent";

        // --- View Switching Logic ---
        function switchMode(mode) {
            // Update Buttons
            ['search', 'compare', 'quiz'].forEach(m => {
                const btn = document.getElementById(`btn-${m}`);
                if (m === mode) {
                    btn.classList.remove('bg-white', 'text-stone-600', 'border', 'border-stone-300');
                    btn.classList.add('bg-warm-700', 'text-white');
                } else {
                    btn.classList.add('bg-white', 'text-stone-600', 'border', 'border-stone-300');
                    btn.classList.remove('bg-warm-700', 'text-white');
                }
                
                // Toggle Sections
                const section = document.getElementById(`section-${m}`);
                if (m === mode) {
                    section.classList.remove('hidden');
                } else {
                    section.classList.add('hidden');
                }
            });
        }

        // --- MODE 1: Search Logic (Existing) ---
        let currentFilter = 'All'; 
        let searchQuery = '';

        document.addEventListener('DOMContentLoaded', () => {
            renderFilters();
            renderCards();
        });

        function renderFilters() {
            const container = document.getElementById('filterContainer');
            const categories = ['All', ...new Set(terminologyData.map(d => d.category))];
            container.innerHTML = categories.map(cat => {
                const activeClass = currentFilter === cat ? 'bg-warm-700 text-white shadow-lg' : 'bg-white text-stone-700 border border-stone-300 hover:bg-warm-50';
                return `<button onclick="setFilter('${cat}')" class="px-4 py-1.5 rounded-full text-sm font-medium transition-all ${activeClass}">${cat === 'All' ? 'é¡¯ç¤ºå…¨éƒ¨' : cat}</button>`;
            }).join('');
        }

        function setFilter(cat) {
            currentFilter = cat;
            renderFilters();
            renderCards();
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchQuery = e.target.value.toLowerCase();
            currentFilter = 'All';
            renderFilters();
            renderCards();
        });

        function renderCards() {
            const container = document.getElementById('cardsContainer');
            const emptyState = document.getElementById('emptyState');
            
            const filtered = terminologyData.filter(item => {
                const matchCat = currentFilter === 'All' || item.category === currentFilter;
                const matchSearch = !searchQuery || item.term.toLowerCase().includes(searchQuery) || item.def.toLowerCase().includes(searchQuery);
                return matchCat && matchSearch;
            });

            if (filtered.length === 0) {
                container.innerHTML = '';
                emptyState.classList.remove('hidden');
                document.getElementById('buttonText').textContent = searchQuery ? `å®šç¾©ã€Œ${searchQuery}ã€` : "å‹•æ…‹æŸ¥æ‰¾";
                document.getElementById('expandButton').disabled = !searchQuery;
            } else {
                emptyState.classList.add('hidden');
                container.innerHTML = filtered.map(item => `
                    <div class="card-hover bg-white rounded-2xl border border-stone-200 shadow-xl p-6 flex flex-col h-full">
                        <div class="mb-3"><span class="text-xs font-semibold text-warm-700 bg-warm-100 px-2 py-1 rounded-lg">${item.category}</span></div>
                        <h3 class="text-2xl font-bold text-stone-800 mb-2">${item.term}</h3>
                        <p class="text-lg text-stone-600 font-medium mb-4 pb-4 border-b border-stone-100">${item.def}</p>
                        <div class="mt-auto"><span class="text-xs text-stone-400 font-bold uppercase">ä½¿ç”¨æƒ…å¢ƒ</span><p class="text-sm text-stone-500 mt-2">${item.useCase}</p></div>
                    </div>
                `).join('');
            }
        }

        // --- MODE 1 API: Expansion ---
        async function fetchAndDisplayExpansion() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) return;

            const card = document.getElementById('expansionAssistantCard');
            card.classList.remove('hidden');
            card.innerHTML = loadingTemplate("AI æ­£åœ¨æŸ¥æ‰¾å®šç¾©...");

            const prompt = `è«‹ç‚º UI/UX è¡“èªã€Œ${query}ã€æä¾›å®šç¾©ã€æƒ…å¢ƒèˆ‡ç›¸é—œè¡“èªã€‚`;
            const schema = {
                type: "OBJECT",
                properties: {
                    term: { type: "STRING" },
                    definition: { type: "STRING" },
                    useCase: { type: "STRING" },
                    relatedTerms: { type: "ARRAY", items: { type: "STRING" } }
                }
            };

            try {
                const result = await callGemini(prompt, schema);
                card.innerHTML = `
                    <div class="mb-3 flex justify-between"><span class="text-xs font-bold text-white bg-warm-700 px-3 py-1 rounded-full uppercase">AI æ“´å……çµæœ</span></div>
                    <h3 class="text-3xl font-black text-warm-700 mb-3">${result.term}</h3>
                    <div class="space-y-4 text-stone-700 api-content">
                        <div><strong class="block text-sm text-stone-400 uppercase mb-1">å®šç¾©</strong><p class="text-lg">${result.definition}</p></div>
                        <div><strong class="block text-sm text-stone-400 uppercase mb-1">æƒ…å¢ƒ</strong><p class="text-lg">${result.useCase}</p></div>
                    </div>
                    <div class="mt-6 border-t border-warm-200 pt-4 flex gap-2 flex-wrap">
                        ${result.relatedTerms.map(t => `<span class="px-3 py-1 bg-warm-50 text-warm-600 rounded-full text-xs font-bold border border-warm-200">${t}</span>`).join('')}
                    </div>
                `;
            } catch (e) {
                card.innerHTML = errorTemplate(e.message);
            }
        }

        // --- MODE 2 API: Comparison ---
        async function fetchComparison() {
            const termA = document.getElementById('termA').value.trim();
            const termB = document.getElementById('termB').value.trim();
            if (!termA || !termB) {
                alert("è«‹è¼¸å…¥å…©å€‹è¡“èªé€²è¡Œæ¯”è¼ƒ");
                return;
            }

            const resultContainer = document.getElementById('comparisonResult');
            resultContainer.classList.remove('hidden');
            resultContainer.innerHTML = loadingTemplate("AI æ­£åœ¨åˆ†æå…©è€…å·®ç•°...");

            const prompt = `Compare "${termA}" and "${termB}" in UI/UX context. Provide a summary of core differences, a comparison table (as an array of objects), and usage advice.`;
            const schema = {
                type: "OBJECT",
                properties: {
                    summary: { type: "STRING" },
                    table: { 
                        type: "ARRAY", 
                        items: { 
                            type: "OBJECT", 
                            properties: { feature: { type: "STRING" }, colA: { type: "STRING" }, colB: { type: "STRING" } } 
                        } 
                    },
                    advice: { type: "STRING" }
                }
            };

            try {
                const data = await callGemini(prompt, schema);
                resultContainer.innerHTML = `
                    <div class="bg-white rounded-2xl shadow-lg border border-stone-200 overflow-hidden">
                        <div class="bg-warm-100 p-6 border-b border-warm-200">
                            <h3 class="text-xl font-bold text-warm-800 text-center mb-2">æ ¸å¿ƒå·®ç•°ç¸½çµ</h3>
                            <p class="text-stone-700 text-center leading-relaxed">${data.summary}</p>
                        </div>
                        <div class="p-6">
                            <div class="overflow-x-auto">
                                <table class="w-full text-left border-collapse">
                                    <thead>
                                        <tr>
                                            <th class="p-4 bg-stone-50 text-stone-400 font-bold uppercase text-xs tracking-wider w-1/4">æ¯”è¼ƒé …ç›®</th>
                                            <th class="p-4 bg-stone-50 text-stone-800 font-bold w-1/3 border-l border-stone-200">${termA}</th>
                                            <th class="p-4 bg-stone-50 text-stone-800 font-bold w-1/3 border-l border-stone-200">${termB}</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-stone-100">
                                        ${data.table.map(row => `
                                            <tr class="hover:bg-stone-50 transition">
                                                <td class="p-4 text-stone-500 font-medium">${row.feature}</td>
                                                <td class="p-4 text-stone-700 border-l border-stone-100">${row.colA}</td>
                                                <td class="p-4 text-stone-700 border-l border-stone-100">${row.colB}</td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="bg-stone-800 p-6 text-stone-300">
                            <strong class="text-warm-400 uppercase text-xs tracking-wider block mb-2">å°ˆå®¶å»ºè­° (Pro Tip)</strong>
                            <p>${data.advice}</p>
                        </div>
                    </div>
                `;
            } catch (e) {
                resultContainer.innerHTML = errorTemplate(e.message);
            }
        }

        // --- MODE 3 API: Quiz ---
        async function fetchQuiz() {
            const card = document.getElementById('quizCard');
            const btn = document.getElementById('startQuizBtn');
            card.classList.remove('hidden');
            btn.classList.add('hidden'); // Hide start button
            card.innerHTML = loadingTemplate("AI æ­£åœ¨å‡ºé¡Œä¸­...");

            // Randomly pick a term to focus the quiz on, or let AI decide generally
            const randomTerm = terminologyData[Math.floor(Math.random() * terminologyData.length)].term;
            
            const prompt = `Generate a multiple-choice UI/UX quiz question focusing on the concept of "${randomTerm}" or general usability principles. Output JSON with question, 4 options, correctIndex (0-3), and explanation.`;
            const schema = {
                type: "OBJECT",
                properties: {
                    question: { type: "STRING" },
                    options: { type: "ARRAY", items: { type: "STRING" } },
                    correctIndex: { type: "INTEGER" },
                    explanation: { type: "STRING" }
                }
            };

            try {
                const data = await callGemini(prompt, schema);
                window.currentQuiz = data; // Store for checking
                
                card.innerHTML = `
                    <div class="p-8">
                        <div class="flex justify-between items-center mb-6">
                            <span class="bg-warm-100 text-warm-700 px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wider">Scenario Question</span>
                            <span class="text-stone-400 text-sm">Topic: ${randomTerm}</span>
                        </div>
                        <h3 class="text-2xl font-bold text-stone-800 mb-8 leading-snug">${data.question}</h3>
                        <div class="space-y-3">
                            ${data.options.map((opt, idx) => `
                                <button onclick="checkAnswer(${idx})" id="opt-${idx}" class="w-full text-left p-4 rounded-xl border-2 border-stone-100 hover:border-warm-400 hover:bg-warm-50 transition flex items-center group">
                                    <span class="w-8 h-8 rounded-full bg-stone-200 text-stone-500 font-bold flex items-center justify-center mr-4 group-hover:bg-warm-200 group-hover:text-warm-700">${['A','B','C','D'][idx]}</span>
                                    <span class="text-lg text-stone-600 font-medium group-hover:text-stone-800">${opt}</span>
                                </button>
                            `).join('')}
                        </div>
                        <div id="quizFeedback" class="hidden mt-8 p-6 rounded-xl bg-stone-50 border border-stone-200 animate-fade-in">
                            <!-- Feedback injected here -->
                        </div>
                    </div>
                    <div class="bg-stone-50 p-4 border-t border-stone-100 text-center">
                        <button onclick="fetchQuiz()" class="text-stone-500 hover:text-warm-600 font-bold text-sm transition">ğŸ”„ ä¸‹ä¸€é¡Œ (Next Question)</button>
                    </div>
                `;
            } catch (e) {
                card.innerHTML = errorTemplate(e.message);
                btn.classList.remove('hidden');
            }
        }

        function checkAnswer(selectedIndex) {
            const data = window.currentQuiz;
            const feedback = document.getElementById('quizFeedback');
            const isCorrect = selectedIndex === data.correctIndex;
            
            // Disable all buttons
            data.options.forEach((_, idx) => {
                const btn = document.getElementById(`opt-${idx}`);
                btn.disabled = true;
                if (idx === data.correctIndex) {
                    btn.classList.add('border-green-500', 'bg-green-50');
                    btn.querySelector('span:first-child').classList.add('bg-green-500', 'text-white');
                } else if (idx === selectedIndex && !isCorrect) {
                    btn.classList.add('border-red-500', 'bg-red-50');
                    btn.querySelector('span:first-child').classList.add('bg-red-500', 'text-white');
                } else {
                    btn.classList.add('opacity-50');
                }
            });

            feedback.classList.remove('hidden');
            feedback.innerHTML = `
                <div class="flex items-start gap-3">
                    <div class="text-3xl">${isCorrect ? 'ğŸ‰' : 'ğŸ’¡'}</div>
                    <div>
                        <h4 class="text-lg font-bold ${isCorrect ? 'text-green-700' : 'text-stone-700'} mb-1">
                            ${isCorrect ? 'ç­”å°äº†ï¼' : 'å†æ¥å†å²ï¼'}
                        </h4>
                        <p class="text-stone-600 leading-relaxed">${data.explanation}</p>
                    </div>
                </div>
            `;
        }

        // --- Helper: Shared API Caller ---
        async function callGemini(userText, responseSchema) {
            const systemPrompt = "You are a UI/UX expert. Respond in Traditional Chinese (ç¹é«”ä¸­æ–‡). Use Google Search grounding to ensure definitions and comparisons are accurate and up-to-date.";
            
            const payload = {
                contents: [{ parts: [{ text: userText }] }],
                tools: [{ "google_search": {} }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: responseSchema
                }
            };

            const maxRetries = 3;
            let attempt = 0;
            while (attempt < maxRetries) {
                try {
                    const response = await fetch(`${apiBaseUrl}?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                         if (response.status === 401 || response.status === 403 || response.status === 400) {
                            throw new Error(`API Auth Error: ${response.status}. Check API Key.`);
                        }
                        if (response.status === 429) throw new Error("Rate limit exceeded");
                        throw new Error(`HTTP ${response.status}`);
                    }

                    const data = await response.json();
                    const text = data?.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (!text) throw new Error("Empty response from AI");
                    return JSON.parse(text);

                } catch (e) {
                    if (e.message.includes("Auth Error")) throw e;
                    attempt++;
                    if (attempt >= maxRetries) throw e;
                    await new Promise(r => setTimeout(r, Math.pow(2, attempt) * 1000));
                }
            }
        }

        // --- Helper: Templates ---
        function loadingTemplate(msg) {
            return `
                <div class="flex flex-col items-center justify-center py-12 text-warm-700 animate-pulse-slow">
                    <svg class="animate-spin mb-4 h-10 w-10" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span class="text-xl font-bold">${msg}</span>
                </div>
            `;
        }

        function errorTemplate(msg) {
            return `
                <div class="text-center py-8 bg-red-50 rounded-xl border border-red-100 p-6">
                    <div class="text-4xl mb-2">âš ï¸</div>
                    <h3 class="text-lg font-bold text-red-800">ç™¼ç”ŸéŒ¯èª¤</h3>
                    <p class="text-red-600 mt-1 text-sm">${msg}</p>
                </div>
            `;
        }
    </script>
</body>
</html>